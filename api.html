
<!DOCTYPE html>
<html lang="en">
  
    <head>
    <meta charset="utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <title>
      Bagatto
    </title>
    <meta
      content="width=device-width, initial-scale=1.0, user-scalable=no"
      name="viewport"
    />
    <meta
      content=""
      itemprop="author"
      name="author"
    />
    <link href="/images/48.png" rel="icon" sizes="48x48" type="image/png" />
    <link href="/images/128.png" rel="icon" sizes="128x128" type="image/png" />
    <link href="/images/256.png" rel="icon" sizes="256x256" type="image/png" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Adamina&family=Raleway:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet"> 
    <link href="static/site.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <div>
      <div>
        <div class="mw8 center pv7 cf">
          <div class="fl">
            <div class="ph3">
              <h1 class="f1 ma0">
                Bagatto<span class="f5 fw5 ml3 dn">A transparent, extensible static site generator</span
                >
              </h1>
              <p class="mv3">
                A transparent, extensible static site generator
              </p>
            </div>
            <nav role="navigation">
              <ul class="list pl0 ma0">
                <li class="dib mr2">
                  <a class="pv2 ph3 fw6 link near-black focus-black"
                     href="index.html">Bagatto</a>
                </li>
                <li class="dib mr2">
                  <a class="pv2 ph3 fw6 link near-black focus-black"
                     href="guides.html">Guides</a>
                </li>
                <li class="dib mr2">
                  <a class="pv2 ph3 fw6 link near-black focus-black"
                     href="api.html">API</a>
                </li>
                <li class="dib mr2">
                  <a class="pv2 ph3 fw6 link near-black focus-black"
                     href="https://sr.ht/~subsetpark/bagatto/">Source</a>
                </li>
              </ul>
            </nav>
   


<h1 id="bagattoapi">bagatto API</h1>

<p><a href="#bagatto%p">bagatto/%p</a>
, <a href="#bagatto*">bagatto/*</a>
, <a href="#bagattoattr-sorter">bagatto/attr-sorter</a>
, <a href="#bagattodatestr-&amp;gt;date">bagatto/datestr-&gt;date</a>
, <a href="#bagattodatestr-&amp;gt;secs">bagatto/datestr-&gt;secs</a>
, <a href="#bagattoepp">bagatto/epp</a>
, <a href="#bagattoeval-data">bagatto/eval-data</a>
, <a href="#bagattoeval-loader">bagatto/eval-loader</a>
, <a href="#bagattoeval-site">bagatto/eval-site</a>
, <a href="#bagattoformat">bagatto/format</a>
, <a href="#bagattoget-default">bagatto/get-default</a>
, <a href="#bagattoglob">bagatto/glob</a>
, <a href="#bagattoitem-getter">bagatto/item-getter</a>
, <a href="#bagattojdn-data">bagatto/jdn-data</a>
, <a href="#bagattojson-data">bagatto/json-data</a>
, <a href="#bagattomarkdown-&amp;gt;html">bagatto/markdown-&gt;html</a>
, <a href="#bagattommarkdown-&amp;gt;html">bagatto/mmarkdown-&gt;html</a>
, <a href="#bagattommarkdown-data">bagatto/mmarkdown-data</a>
, <a href="#bagattoparse-base">bagatto/parse-base</a>
, <a href="#bagattoparse-jdn">bagatto/parse-jdn</a>
, <a href="#bagattoparse-json">bagatto/parse-json</a>
, <a href="#bagattoparse-mmarkdown">bagatto/parse-mmarkdown</a>
, <a href="#bagattopath-copier">bagatto/path-copier</a>
, <a href="#bagattorender">bagatto/render</a>
, <a href="#bagattorenderer">bagatto/renderer</a>
, <a href="#bagattoset-defaults">bagatto/set-defaults!</a>
, <a href="#bagattosite-getter">bagatto/site-getter</a>
, <a href="#bagattoslug-from-attr">bagatto/slug-from-attr</a>
, <a href="#bagattoslugify">bagatto/slugify</a>
, <a href="#bagattoslurp-*">bagatto/slurp-*</a>
, <a href="#bagattowrite-site">bagatto/write-site</a></p>

<h2 id="bagattop">bagatto/%p</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L248">source</a></p>

<pre><code class="janet">(%p &amp; elements)
</code></pre>

<p>Simple DSL for generating paths.</p>

<p>Given any number of string or keyword arguments, will return a
function that takes an item and returns a file path.</p>

<p>The arguments make up the components of the path. To include an
element directly in the path, put it as an argument. To indicate
that an element should be treated as a key in <code>site</code>, precede it by
a <code>'%s</code>. To indicate that an element should be treated as a key in
<code>item</code>, precede it by a <code>'%i</code>. To join two elements directly,
without a path separator, put a <code>'%</code> between them. For instance,</p>

<pre><code class="clj">repl:9:&gt; (def f (bagatto/%p &quot;site&quot; '%s &quot;author&quot; '%i :title '% &quot;.html&quot;))
&lt;function 0x55F38B3B3880&gt;
repl:10:&gt; (f {&quot;author&quot; &quot;Z. D. Smith&quot;} {:title &quot;My first post&quot;})
&quot;site/z-d-smith/my-first-post.html&quot;
repl:11:&gt; (f {&quot;author&quot; &quot;Z. D. Smith&quot;} {:title &quot;My second post&quot;})
&quot;site/z-d-smith/my-second-post.html&quot;
</code></pre>

<h2 id="bagatto">bagatto/*</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L106">source</a></p>

<pre><code class="janet">(* pattern)
</code></pre>

<p>Generate a function that will return all the filenames that match a given
file blob.</p>

<h2 id="bagattoattr-sorter">bagatto/attr-sorter</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L331">source</a></p>

<pre><code class="janet">(attr-sorter key &amp;opt descending?)
</code></pre>

<p>Return a sorter function that, given a list of items, sorts
according to the items' values at the specified key.</p>

<h2 id="bagattodatestr-gtdate">bagatto/datestr-&gt;date</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L79">source</a></p>

<pre><code class="janet">(datestr-&gt;date datestr &amp;opt for-display?)
</code></pre>

<p>Given a string representation of a date or datetime, return a struct
of the kind returned by <code>os/date</code>. Pass a truthy value in the second
argument to adjust for human display (setting values like day and
month to be 1-indexed).</p>

<h2 id="bagattodatestr-gtsecs">bagatto/datestr-&gt;secs</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L71">source</a></p>

<pre><code class="janet">(datestr-&gt;secs datestr)
</code></pre>

<p>Given a string representation of a date or datetime, return the
epoch seconds value for that date.</p>

<h2 id="bagattoepp">bagatto/epp</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L420">source</a></p>

<pre><code class="janet">(epp x)
</code></pre>

<p>Pretty-print to stderr. Since Temple templates operate over stdout,
we should use stderr instead if we need to print something to the
console for debugging purposes.</p>

<h2 id="bagattoeval-data">bagatto/eval-data</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L344">source</a></p>

<pre><code class="janet">(eval-data data)
</code></pre>

<p>Evaluate an object according to the Bagatto <em>site data specification</em>.</p>

<p>Not necessary to define a module, but can be useful to debug your
configuration from within the REPL.</p>

<h2 id="bagattoeval-loader">bagatto/eval-loader</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L354">source</a></p>

<pre><code class="janet">(eval-loader fiber)
</code></pre>

<p>Evaluate a loader fiber to view the list of filenames, or filename
and contents, it produces.</p>

<p>Not necessary to define a module, but can be useful to debug your
configuration from within the REPL.</p>

<h2 id="bagattoeval-site">bagatto/eval-site</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L365">source</a></p>

<pre><code class="janet">(eval-site site data)
</code></pre>

<p>Evaluate an object according to the Bagatto <em>site generation specification</em>,
given a site data object as context.</p>

<p>Not necessary to define a module, but can be useful to debug your
configuration from within the REPL.</p>

<h2 id="bagattoformat">bagatto/format</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L410">source</a></p>

<pre><code class="janet">(format templ &amp; xs)
</code></pre>

<p>A simple wrapper around <code>string/format</code> to ease development. If one
of <code>xs</code> is nil, it will output an empty string rather than crashing
the template.</p>

<h2 id="bagattoget-default">bagatto/get-default</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L28">source</a></p>

<pre><code class="janet">(get-default attribute)
</code></pre>

<p>Get the value set in the bagatto defaults for the specified key. Can
be used for a simple form of inheritence; if you have a default
callback or value set, and you have some specific handler that needs
to build on top of that functionality, you can call
<code>bagatto/get-default</code> to get or evaluate it inside of the handler
and then implement your more specific logic.</p>

<p>(see <code>bagatto/set-defaults!</code> for more information.)</p>

<h2 id="bagattoglob">bagatto/glob</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L98">source</a></p>

<pre><code class="janet">(glob pattern)
</code></pre>

<h2 id="bagattoitem-getter">bagatto/item-getter</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L238">source</a></p>

<pre><code class="janet">(item-getter path)
</code></pre>

<p>Return a function that, given site and item data, gets the value at
the given path in the item.</p>

<p>The path should be a tuple of keys, eg.: <code>[:user :full-name]</code>.</p>

<h2 id="bagattojdn-data">bagatto/jdn-data</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L51">source</a></p>

<pre><code class="janet">(jdn-data src)
</code></pre>

<p>Get metadata from a JDN-formatted string.</p>

<h2 id="bagattojson-data">bagatto/json-data</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L56">source</a></p>

<pre><code class="janet">(json-data src)
</code></pre>

<p>Get metadata from a JSON-formatted string.</p>

<h2 id="bagattomarkdown-gthtml">bagatto/markdown-&gt;html</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L392">source</a></p>

<pre><code class="janet">(markdown-&gt;html md)
</code></pre>

<p>Render a markdown string into HTML.</p>

<h2 id="bagattommarkdown-gthtml">bagatto/mmarkdown-&gt;html</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L397">source</a></p>

<pre><code class="janet">(mmarkdown-&gt;html md &amp;keys {:smart smart})
</code></pre>

<p>Render a markdown string using multimarkdown.</p>

<p>Accepts &amp;keys flags :</p>

<ul>
<li>:smart [default: true] enable/disable conversion of typographic
characters (apostrophes, dashes) into their styled counterparts.</li>
</ul>

<p>(requires the presence of the multimarkdown executable.)</p>

<h2 id="bagattommarkdown-data">bagatto/mmarkdown-data</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L46">source</a></p>

<pre><code class="janet">(mmarkdown-data md)
</code></pre>

<p>Get metadata from a markdown string using multimarkdown.</p>

<h2 id="bagattoparse-base">bagatto/parse-base</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L126">source</a></p>

<pre><code class="janet">(parse-base _src attrs)
</code></pre>

<p>Base attribute parser: bypasses the input source and returns the
default attributes that are provided for every file. These are:</p>

<ul>
<li><code>:path</code>: the file path</li>
<li><code>:src</code>: (if the file was read) the contents of the file</li>
</ul>

<h2 id="bagattoparse-jdn">bagatto/parse-jdn</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L145">source</a></p>

<pre><code class="janet">(parse-jdn src attrs)
</code></pre>

<p>Attribute parser for JDN.</p>

<h2 id="bagattoparse-json">bagatto/parse-json</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L150">source</a></p>

<pre><code class="janet">(parse-json src attrs)
</code></pre>

<p>Attribute parser for JSON.</p>

<h2 id="bagattoparse-mmarkdown">bagatto/parse-mmarkdown</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L136">source</a></p>

<pre><code class="janet">(parse-mmarkdown src attrs)
</code></pre>

<p>Attribute parser for multimarkdown.</p>

<p>(requires the presence of the multimarkdown executable.)</p>

<h2 id="bagattopath-copier">bagatto/path-copier</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L310">source</a></p>

<pre><code class="janet">(path-copier base &amp;opt key)
</code></pre>

<p>Return a function that will generate a new path with the same
base, from the same key, for any item.</p>

<p>eg.:</p>

<pre><code class="clj">repl:2:&gt; (def f (bagatto/path-copier &quot;destination&quot;))
&lt;function 0x55F38B3AE640&gt;
repl:3:&gt; (f {} {:path &quot;original/source/directory/filename.md&quot;})
&quot;destination/filename.md&quot;
repl:4:&gt; (f {} {:path &quot;original/source/directory/newfile.png&quot;})
&quot;destination/newfile.png&quot;
</code></pre>

<h2 id="bagattorender">bagatto/render</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L159">source</a></p>

<pre><code class="janet">(render template site &amp;opt item)
</code></pre>

<p>Given site data and an optional item, render the specified Temple template.</p>

<p>All the attributes will be available in the template under <code>args</code>.</p>

<p>If a single item was passed in in addition to the site, that item
will be available at <code>(args :_item)</code>.</p>

<p>In addition to the standard Janet library, the same additional
libraries that Bagatto makes available when writing an index module
are also available (without explicitly importing them) from within a
template.</p>

<p>See the <a href="https://git.sr.ht/~bakpakin/temple">Temple</a> site for more details.</p>

<h2 id="bagattorenderer">bagatto/renderer</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L214">source</a></p>

<pre><code class="janet">(renderer template-path &amp;opt extra-attrs)
</code></pre>

<p>Return a function, given a template and optional extra attributes,
that will call <code>render</code> with that template on any input.</p>

<p>(see <code>bagatto/render</code> for more details.)</p>

<h2 id="bagattoset-defaults">bagatto/set-defaults!</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L17">source</a></p>

<pre><code class="janet">(set-defaults! defaults)
</code></pre>

<p>Set the defaults for the values specified in data and site
specifications. For instance, setting the default of <code>:attrs</code> to
<code>bagatto/parse-json</code> will attempt to set the attributes for any file
by parsing it as JSON. <code>:attrs</code> could still be set on any entry in
the data spec in order to override the default.</p>

<h2 id="bagattosite-getter">bagatto/site-getter</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L228">source</a></p>

<pre><code class="janet">(site-getter path)
</code></pre>

<p>Return a function that, given site data or site and item data, gets
the value at the given path in the site.</p>

<p>The path should be a tuple of keys, eg.: <code>[:blog :description]</code>.</p>

<h2 id="bagattoslug-from-attr">bagatto/slug-from-attr</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L200">source</a></p>

<pre><code class="janet">(slug-from-attr item key)
</code></pre>

<p>Given an object and a key, get the value of that key in the object
it make the value into a slug.</p>

<p>(see <code>bagatto/slugify</code> for more details.)</p>

<h2 id="bagattoslugify">bagatto/slugify</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L186">source</a></p>

<pre><code class="janet">(slugify s)
</code></pre>

<p>Normalize a string for use as a slug, eg., in a file path.</p>

<h2 id="bagattoslurp-">bagatto/slurp-*</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L114">source</a></p>

<pre><code class="janet">(slurp-* pattern)
</code></pre>

<p>Generate a function that will slurp all the files that match a given
file blob.</p>

<h2 id="bagattowrite-site">bagatto/write-site</h2>

<p><strong>function</strong> | <a href="/usr/lib/janet/bagatto.janet#L376">source</a></p>

<pre><code class="janet">(write-site writer-specs)
</code></pre>

<p>Given the output of a site generation specification, trigger the
actual file generation.</p>

<p>Not necessary to define a module, but can be useful to debug your
configuration from within the REPL.</p>


      </div>
    </div>
    <footer class="bg-near-white pv5 ph3 pa6-ns mt5 dt-l w-100 lh-copy">
      <div class="dtc-l tr-l mt2 mt0-l">
        Built with Bagatto.
      </div>
    </footer>
  </body>
</html>

